<div ng-controller="update-courses-units">
	
	<div class="info-panel">
		<div class="row">
			<div class="col-md-6">
				<div class="form-group">
					<label for="level" class="form-label">
						<i class="bi bi-stack"></i>
						{{labels.level}}
					</label>
					<select id="level" ng-model="level" class="form-select" placeholder="{{labels.level}}" ng-options="level.id as level.name for level in levels | orderBy : 'index'" placeholder="{{labels.level}}" ng-disabled="submitted" ng-change="updateLevel(true)">
						<option disabled="disabled" value="">-- اختر {{labels.level}} --</option>
					</select>
				</div>
			</div>
			<div class="col-md-6">
				<div class="form-group">
					<label for="course" class="form-label">
						<i class="bi bi-book"></i>
						{{labels.course}} الدراسية
					</label>
					<select id="course" ng-model="course" class="form-select" placeholder="{{labels.course}} الدراسية" ng-options="course.id as course.name for course in levelCourses | orderBy : 'index'" placeholder="{{labels.course}}" ng-disabled="submitted" ng-change="updateCourse()">
						<option disabled="disabled" value="">-- اختر {{labels.course}} --</option>
					</select>
				</div>
			</div>
		</div>
		<div class="help-text-enhanced">
			<small class="text-helper">
				<i class="bi bi-info-circle"></i>
				يجب اختيار {{labels.level}} و{{labels.course}} أولاً لتتمكن من إدارة الوحدات والدروس
			</small>
		</div>
	</div>
	
	<div class="card" ng-repeat="(unitIndex, unit) in units track by $index" ng-if="level != null && course != null">
		<div class="card-header">
			<i class="bi bi-collection"></i>
			{{unit.name}}
		</div>
		<div class="card-body">
			<div class="form-group" ng-repeat="topic in unit.topics track by $index">

				<div class="input-group">
					<label class="input-group-text text-bg-success bg-success text-white" ng-if="topicsCompleted[topic.id] != null">
						{{topic.time}}
					</label>
					<label for="topic-{{unitIndex}}-{{$index}}" class="form-control">
						{{topic.name}}
					</label>
					<span class="input-group-text">
						<div class="form-check form-switch">
							<input id="topic-{{unitIndex}}-{{$index}}" class="form-check-input" type="checkbox" role="switch" ng-model="topic.selected" ng-value="true" ng-true-value="true" ng-false-value="false" ng-change="completeTopic(topic)">
							<label class="form-check-label" for="topic-{{unitIndex}}-{{$index}}"></label>
						</div>
					</span>
					<label class="input-group-text" ng-class="{'text-bg-success bg-success text-white':topicsCompleted[topic.id] != null}">{{$index + 1}}</label>
				</div>
			</div>
		</div>
	</div>

</div>