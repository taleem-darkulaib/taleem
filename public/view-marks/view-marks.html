<div ng-controller="view-marks">

	<div class="info-panel">
		<div class="row">
			<div class="col-md-6">
				<div class="form-group">
					<label for="level" class="form-label">
						<i class="bi bi-layers"></i>
						{{labels.level}}
					</label>
					<select id="level" ng-model="level" class="form-select" placeholder="{{labels.level}}" ng-options="level.id as level.name for level in levels | orderBy:'index'" required="required" ng-disabled="submitted" ng-change="updateLevel(true)">
						<option disabled="disabled" value="">اختر {{labels.level}}</option>
					</select>
				</div>
			</div>
			<div class="col-md-6">
				<div class="form-group">
					<label for="course" class="form-label">
						<i class="bi bi-book"></i>
						{{labels.course}}
					</label>
					<select id="course" ng-model="course" class="form-select" placeholder="{{labels.course}}" ng-options="course.id as course.name for course in levelCourses" required="required" ng-disabled="submitted || !level" ng-change="updateCourse()">
						<option disabled="disabled" value="">اختر {{labels.course}}</option>
					</select>
				</div>
			</div>
			<div class="col-md-6">
				<div class="form-group">
					<label for="teacher" class="form-label">
						<i class="bi bi-person-workspace"></i>
						المعلم
					</label>
					<div class="input-group">
						<span class="input-group-text">
							<i class="bi bi-person-check"></i>
							المعلم المسؤول
						</span>
						<input id="teacher" ng-value="teachers[teacher].name" class="form-control" placeholder="المعلم" readonly="readonly" ng-disabled="submitted">
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="table-responsive">
		<table class="table table-striped">
			<thead>
				<tr>
					<th>
						<i class="bi bi-hash"></i>
						#
					</th>
					<th>
						<i class="bi bi-person"></i>
						اسم الطالب
					</th>
					<th ng-repeat="distribution in marksDistribution track by $index" class="text-center">
						<i class="bi bi-stack"></i>
						{{distribution.title}} ({{distribution.mark}})
					</th>
					<th class="text-center">
						<i class="bi bi-calculator-fill"></i>
						المجموع (100)
					</th>
					<th class="text-center">
						<i class="bi bi-chat"></i>
						الملاحظات
					</th>
				</tr>
			</thead>
			<tbody>
				<tr ng-repeat="student in levelStudents | orderBy:'name' track by $index">
					<td>
						<span class="counter-badge counter-badge-sm">{{$index + 1}}</span>
					</td>
					<td>
						{{student.name}}
					</td>
					<td ng-repeat="distribution in marksDistribution track by $index" class="text-center">
						{{marks[student.cpr][distribution.id]}}
					</td>
					<td class="text-center">
						<span class="status-badge status-badge-linked">
							{{marks[student.cpr]['المجموع']}}
						</span>
					</td>
					<td class="text-center">
						<div class="info-panel">
							<small class="text-helper">
								<i class="bi bi-chat-text"></i>
								<span ng-bind-html="marks[student.cpr].comment"></span>
							</small>
						</div>
					</td>
				</tr>
			</tbody>
		</table>
	</div>

</div>